<svg width="2200" height="1300" viewBox="0 0 2200 1300" fill="none" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="bg" x1="0" y1="0" x2="2200" y2="1300" gradientUnits="userSpaceOnUse">
      <stop stop-color="#0D1220"/>
      <stop offset="1" stop-color="#131B2F"/>
    </linearGradient>
    <linearGradient id="fe" x1="0" y1="0" x2="1" y2="1">
      <stop stop-color="#1B315A"/>
      <stop offset="1" stop-color="#224376"/>
    </linearGradient>
    <linearGradient id="be" x1="0" y1="0" x2="1" y2="1">
      <stop stop-color="#183E2D"/>
      <stop offset="1" stop-color="#1F5B3E"/>
    </linearGradient>
    <linearGradient id="sb" x1="0" y1="0" x2="1" y2="1">
      <stop stop-color="#3B1F59"/>
      <stop offset="1" stop-color="#52277A"/>
    </linearGradient>
    <marker id="arrB" markerWidth="14" markerHeight="14" refX="10" refY="7" orient="auto"><path d="M0 0L12 7L0 14V0Z" fill="#6FA6FF"/></marker>
    <marker id="arrG" markerWidth="14" markerHeight="14" refX="10" refY="7" orient="auto"><path d="M0 0L12 7L0 14V0Z" fill="#63D08E"/></marker>
    <marker id="arrP" markerWidth="14" markerHeight="14" refX="10" refY="7" orient="auto"><path d="M0 0L12 7L0 14V0Z" fill="#C18BFF"/></marker>
    <style>
      .t1 { font: 700 52px Inter, Segoe UI, Arial, sans-serif; fill: #EDF3FF; }
      .t2 { font: 500 22px Inter, Segoe UI, Arial, sans-serif; fill: #AFC2E8; }
      .zone { font: 700 30px Inter, Segoe UI, Arial, sans-serif; fill: #E8F0FF; }
      .n1 { font: 700 24px Inter, Segoe UI, Arial, sans-serif; fill: #F6FAFF; }
      .n2 { font: 500 20px Inter, Segoe UI, Arial, sans-serif; fill: #D6E4FF; }
      .al { font: 600 18px Inter, Segoe UI, Arial, sans-serif; fill: #C3D4F5; }
    </style>
  </defs>

  <rect width="2200" height="1300" rx="28" fill="url(#bg)"/>
  <text x="90" y="95" class="t1">Buddhira Architecture (Dark)</text>
  <text x="90" y="132" class="t2">Next.js + FastAPI + Supabase + CI release gates</text>

  <rect x="70" y="180" width="660" height="1020" rx="28" fill="#162743" stroke="#335D9B" stroke-width="3"/>
  <text x="105" y="240" class="zone">Frontend</text>
  <rect x="770" y="180" width="700" height="1020" rx="28" fill="#163525" stroke="#2D6C4A" stroke-width="3"/>
  <text x="805" y="240" class="zone">Backend</text>
  <rect x="1510" y="180" width="620" height="1020" rx="28" fill="#32194C" stroke="#7240A3" stroke-width="3"/>
  <text x="1545" y="240" class="zone">Supabase</text>

  <rect x="110" y="285" width="290" height="120" rx="20" fill="#2A354D"/>
  <text x="140" y="335" class="n1">User Browser</text>
  <text x="140" y="370" class="n2">Desktop + Mobile</text>

  <rect x="110" y="470" width="580" height="180" rx="22" fill="url(#fe)"/>
  <text x="145" y="530" class="n1">Next.js Pages/UI</text>
  <text x="145" y="568" class="n2">Inbox, New, Item Detail, Tags, Auth pages</text>
  <text x="145" y="602" class="n2">Skeletons, filters, mobile FAB, a11y updates</text>

  <rect x="110" y="700" width="580" height="170" rx="22" fill="url(#fe)"/>
  <text x="145" y="758" class="n1">apiFetch</text>
  <text x="145" y="796" class="n2">Bearer token, retry strategy, 401 handling</text>
  <text x="145" y="830" class="n2">Typed contracts for item/tag workflows</text>

  <rect x="110" y="920" width="580" height="180" rx="22" fill="url(#fe)"/>
  <text x="145" y="980" class="n1">Supabase Auth Client</text>
  <text x="145" y="1018" class="n2">Sign up/in, callback exchange, reset flows</text>
  <text x="145" y="1052" class="n2">Client-side session lifecycle</text>

  <rect x="810" y="320" width="620" height="170" rx="22" fill="url(#be)"/>
  <text x="845" y="378" class="n1">Middleware</text>
  <text x="845" y="416" class="n2">CORS, logging, rate limiting</text>
  <text x="845" y="450" class="n2">Health checks + request instrumentation</text>

  <rect x="810" y="535" width="620" height="170" rx="22" fill="url(#be)"/>
  <text x="845" y="593" class="n1">JWT Verify via JWKS</text>
  <text x="845" y="631" class="n2">ES256 validation and current user extraction</text>
  <text x="845" y="665" class="n2">No backend-owned login/signup routes</text>

  <rect x="810" y="750" width="620" height="190" rx="22" fill="url(#be)"/>
  <text x="845" y="810" class="n1">API Routes + Business Rules</text>
  <text x="845" y="848" class="n2">items/tags/item_tags CRUD + search/filter/state</text>
  <text x="845" y="882" class="n2">Pin/archive flows and tag association logic</text>
  <text x="845" y="916" class="n2">All reads/writes scoped to user_id</text>

  <rect x="810" y="980" width="620" height="130" rx="22" fill="url(#be)"/>
  <text x="845" y="1038" class="n1">Unified API Errors</text>
  <text x="845" y="1074" class="n2">{ detail, code } contract</text>

  <rect x="1550" y="360" width="540" height="190" rx="22" fill="url(#sb)"/>
  <text x="1585" y="422" class="n1">Auth Service</text>
  <text x="1585" y="460" class="n2">JWT issuing, recovery links, JWKS endpoint</text>
  <text x="1585" y="494" class="n2">Session + token lifecycle</text>

  <rect x="1550" y="640" width="540" height="260" rx="22" fill="#5A2E2E"/>
  <text x="1585" y="702" class="n1">Postgres + RLS</text>
  <text x="1585" y="740" class="n2">items, tags, item_tags tables</text>
  <text x="1585" y="774" class="n2">RLS owner policies + indexes</text>
  <text x="1585" y="808" class="n2">Backend uses service-role client</text>
  <text x="1585" y="842" class="n2">No direct frontend data layer access</text>

  <rect x="1550" y="950" width="540" height="160" rx="22" fill="url(#sb)"/>
  <text x="1585" y="1012" class="n1">GitHub Actions CI</text>
  <text x="1585" y="1050" class="n2">Lint + Build + Backend Smoke gates</text>
  <text x="1585" y="1084" class="n2">Fork PR smoke skip; main push enforced</text>

  <path d="M400 345 C460 345, 460 520, 520 520" stroke="#6FA6FF" stroke-width="4" marker-end="url(#arrB)"/>
  <text x="445" y="425" class="al">UI interactions</text>
  <path d="M520 650 C700 650, 700 400, 810 400" stroke="#63D08E" stroke-width="4" marker-end="url(#arrG)"/>
  <text x="650" y="620" class="al">HTTP API calls</text>
  <path d="M520 790 C700 790, 700 610, 810 610" stroke="#63D08E" stroke-width="4" marker-end="url(#arrG)"/>
  <text x="620" y="760" class="al">Authorization: Bearer JWT</text>
  <path d="M690 1010 C960 1010, 960 455, 1550 455" stroke="#C18BFF" stroke-width="4" marker-end="url(#arrP)"/>
  <text x="1015" y="982" class="al">Auth SDK operations</text>
  <path d="M1430 845 C1490 845, 1490 760, 1550 760" stroke="#63D08E" stroke-width="4" marker-end="url(#arrG)"/>
  <text x="1450" y="800" class="al">CRUD + filters</text>
</svg>
